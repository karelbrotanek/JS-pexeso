<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Title</title>
</head>
<body>
<div id = "cardsfield" style="font-size: 150px">
<script>
  function sleep (ms){
    const date = Date.now();
    //document.write(date);
    let cDate = null;
    do{
      cDate = Date.now();
    }
    while (cDate - date < ms);
  }
  let cards = ["😂", "😒", "🤔", "🙂", "😍", "😎", "🤩", "😃"];
  cards = cards.concat(cards);// pripoji  za pole jeste jedno to same
  let fliped = 0;
  let prvni = -1;
  let druha = -1;
  let bestcards = "";
  for (let i = 0; i < cards.length; i++) {
    if (i > 0 && i % 4 == 0){
      bestcards += "<br>";
      document.write("<br>");
    }
    bestcards  += "🔲";
    document.write("<span id='"+i+"' onclick='flipcard("+i+")'>🔲</span>")
  }
  function newgame(){
    for (let i = 0; i < cards.length; i++) {
      let r = Math.floor(Math.random() * cards.length);// vygeneruje náhodné číslo od 0 - 15
      let tmp = cards[i];
      cards[i] = cards[r];
      cards[r] = tmp;
      document.getElementById(i).innerHTML = "🔲";
      document.getElementById(i).setAttribute("style", "background-color: white;");
    }
     fliped = 0;
     prvni = -1;
     druha = -1;
  }
  newgame();
  function flipcard (id){
    if (fliped >= 2){
      //sleep(1000);
      //for (let i = 0; i < 16; i++) {
      //document.getElementById(i).innerHTML = "🔲";
      //}
      document.getElementById(prvni).innerHTML = "🔲";
      document.getElementById(druha).innerHTML = "🔲";
      prvni = -1;
      //druha = -1;
      fliped = 0;
    }
    if (fliped == 0){
      document.getElementById(id).innerHTML = cards[id];
      prvni = id;
    }
    if (fliped == 1) {
      document.getElementById(id).innerHTML = cards[id];
      druha = id;
      if (cards[prvni] == cards[druha]){
        document.getElementById(prvni).setAttribute("style", "background-color: green;");
        document.getElementById(druha).setAttribute("style", "background-color: green;");
        fliped = -1;
      }
    }
    fliped++;
    document.getElementById(20).innerHTML = fliped;
    document.getElementById(20).innerHTML = fliped;
    if (prvni < 0){
      document.getElementById(druha).innerHTML = "🔲";
    }
  }
  document.write("<div id='20'>" + fliped + "</div>");
  document.write("<div onclick='newgame()'>↺</div>");
  //document.getElementById("cardsfield").innerText = bestcards;
  //document.write(bestcards);
</script>
</div>
</body>
</html>
